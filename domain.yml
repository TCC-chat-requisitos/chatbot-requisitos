version: "3.1"

actions:
  - action_reset_user_story_title
  - action_reset_user_story_description
  - action_reset_user_story_acceptance_criteria

intents:
  - greet
  - agree
  - deny
  - start_title_extraction
  - start_description_extraction
  - start_acceptance_criteria_extraction
  - show_user_story

responses:
  utter_greet:
  - text: "Hello! I'm a bot."

  utter_ask_if_user_knows_the_bot:
  - text: "Do you already knows me?"

  utter_explain_objective:
  - text: "I'm here to help you to create a User Story."

  utter_ask_if_user_want_to_know_user_story:
  - text: "Do you want to know what is a User Story?"

  utter_explain_user_story:
  - text: "A User Story is a description of a feature told from the perspective of the person who desires the new capability, usually a user or customer of the system. It is a tool used in Agile software development to capture a description of a software feature from an end-user perspective."

  utter_ask_to_move_to_title_extraction:
  - text: "Do you want to start the User Story creation?"
    buttons:
      - title: "Yes"
        payload: "Yes, I want to start with the title"
      - title: "No"
        payload: "No, I don't want to start"

  utter_ask_to_type_user_story_title:
  - text: "Please, type the title of the User Story."

  utter_confirm_user_story_title:
  - text: "The title of the user story is: '{user_story_title}'"

  utter_ask_to_edit_user_story_title:
  - text: "Do you want to edit the title of the User Story?"
    buttons:
      - title: "Yes"
        payload: "Yes, I want to edit the title"
      - title: "No"
        payload: "No, I want to continue for the description"

  utter_ask_to_type_user_story_description:
  - text: "Please, type the description of the User Story."

  utter_confirm_user_story_description:
  - text: "The description of the user story is: '{user_story_description}'"

  utter_ask_to_edit_user_story_description:
  - text: "Do you want to edit the description of the User Story?"
    buttons:
      - title: "Yes"
        payload: "Yes, I want to edit the description"
      - title: "No"
        payload: "No, I want to continue for the acceptance criteria"

  utter_ask_to_type_user_story_acceptance_criteria:
  - text: "Please, type the acceptance criteria of the User Story."

  utter_confirm_user_story_acceptance_criteria:
  - text: "The acceptance criteria of the user story is: '{user_story_acceptance_criteria}'"

  utter_ask_to_edit_user_story_acceptance_criteria:
  - text: "Do you want to edit the acceptance criteria of the User Story?"
    buttons:
      - title: "Yes"
        payload: "Yes, I want to edit the acceptance criteria"
      - title: "No"
        payload: "No, I don't :)"

  utter_show_user_story:
  - text: "The User Story is: Title: '{user_story_title}', Description: '{user_story_description}', Acceptance Criteria: '{user_story_acceptance_criteria}'"

forms:
  title_form:
    required_slots:
      - user_story_title
  description_form:
    required_slots:
      - user_story_description
  acceptance_criteria_form:
    required_slots:
      - user_story_acceptance_criteria

slots:
  user_story_title:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: title_form
        requested_slot: user_story_title

  user_story_description:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: description_form
        requested_slot: user_story_description

  user_story_acceptance_criteria:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: acceptance_criteria_form
        requested_slot: user_story_acceptance_criteria

session_config:
  session_expiration_time: 3000
  carry_over_slots_to_new_session: true
